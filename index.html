<!DOCTYPE html>
<html lang="ru">
<head>
    <style>
    /* –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ */
    body {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: white;
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    /* –Ø—Ä–∫–∏–π —Å—Ç–∏–ª—å –¥–ª—è –∏–≥—Ä–æ–∫–∞ */
    .player-row {
        background: rgba(33, 150, 243, 0.4) !important;
        border: 2px solid #2196F3 !important;
        font-weight: bold;
    }
 </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë–∏–∞—Ç–ª–æ–Ω –ú–µ–Ω–µ–¥–∂–µ—Ä - –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –°–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/character.css">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="mainMenu" class="screen active">
        <div class="menu-container">
            <div class="stadium-background">
                <div class="stadium"></div>
                <div class="snow"></div>
                <div class="biathletes"></div>
            </div>
            
            <div class="menu-content">
                <h1 class="game-title">üèÅ –ë–∏–∞—Ç–ª–æ–Ω –ú–µ–Ω–µ–¥–∂–µ—Ä</h1>
                <div class="version-badge" style="text-align: center; margin-bottom: 20px; color: #4FC3F7; font-weight: bold;">
                    –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ v3.0
                </div>
                <div class="menu-options">
                    <div class="race-selection">
                        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–Ω–∫—É</h2>
                        <div class="race-cards">
                            <!-- –°–ø—Ä–∏–Ω—Ç -->
                            <div class="race-card selected" data-race="SPRINT">
                                <div class="race-icon">‚ö°</div>
                                <h3>–°–ø—Ä–∏–Ω—Ç</h3>
                                <p>9.9 –∫–º ‚Ä¢ 2 —Å—Ç—Ä–µ–ª—å–±—ã</p>
                                <div class="race-stats">
                                    <span>üìè 3.3km/–∫—Ä—É–≥</span>
                                    <span>üéØ 2x</span>
                                    <span>‚è±Ô∏è 3 –∫—Ä—É–≥–∞</span>
                                </div>
                                <div class="penalty-info">‚è∞ –®—Ç—Ä–∞—Ñ: 150–º –∫—Ä—É–≥/–ø—Ä–æ–º–∞—Ö</div>
                            </div>
                            
                            <!-- –ì–æ–Ω–∫–∞ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è -->
                            <div class="race-card" data-race="PURSUIT">
                                <div class="race-icon">üèÉ</div>
                                <h3>–ì–æ–Ω–∫–∞ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</h3>
                                <p>12.5 –∫–º ‚Ä¢ 4 —Å—Ç—Ä–µ–ª—å–±—ã</p>
                                <div class="race-stats">
                                    <span>üìè 2.5km/–∫—Ä—É–≥</span>
                                    <span>üéØ 4x</span>
                                    <span>‚è±Ô∏è 5 –∫—Ä—É–≥–æ–≤</span>
                                </div>
                                <div class="penalty-info">‚è∞ –®—Ç—Ä–∞—Ñ: 150–º –∫—Ä—É–≥/–ø—Ä–æ–º–∞—Ö</div>
                            </div>
                            
                            <!-- –ú–∞—Å—Å-—Å—Ç–∞—Ä—Ç -->
                            <div class="race-card" data-race="MASS">
                                <div class="race-icon">üë•</div>
                                <h3>–ú–∞—Å—Å-—Å—Ç–∞—Ä—Ç</h3>
                                <p>15 –∫–º ‚Ä¢ 4 —Å—Ç—Ä–µ–ª—å–±—ã</p>
                                <div class="race-stats">
                                    <span>üìè 3.0km/–∫—Ä—É–≥</span>
                                    <span>üéØ 4x</span>
                                    <span>‚è±Ô∏è 5 –∫—Ä—É–≥–æ–≤</span>
                                </div>
                                <div class="penalty-info">‚è∞ –®—Ç—Ä–∞—Ñ: 150–º –∫—Ä—É–≥/–ø—Ä–æ–º–∞—Ö</div>
                            </div>
                            
                            <!-- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è -->
                            <div class="race-card" data-race="INDIVIDUAL">
                                <div class="race-icon">üë§</div>
                                <h3>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è</h3>
                                <p>20 –∫–º ‚Ä¢ 4 —Å—Ç—Ä–µ–ª—å–±—ã</p>
                                <div class="race-stats">
                                    <span>üìè 4.0km/–∫—Ä—É–≥</span>
                                    <span>üéØ 4x</span>
                                    <span>‚è±Ô∏è 5 –∫—Ä—É–≥–æ–≤</span>
                                </div>
                                <div class="penalty-info">‚è∞ –®—Ç—Ä–∞—Ñ: 1 –º–∏–Ω/–ø—Ä–æ–º–∞—Ö</div>
                            </div>
                        </div>

                        <!-- –ë–ª–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
                        <div id="raceRecommendation"></div>
                    </div>
                    
                    <div class="menu-buttons">
                        <button class="menu-btn primary" id="startRace">
                            üéÆ –ù–∞—á–∞—Ç—å –≥–æ–Ω–∫—É
                        </button>
                        <button class="menu-btn secondary" id="characterBtn">
                            üë§ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
                        </button>
                        <button class="menu-btn secondary" id="locationBtn">
                            üåç –í—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–∏
                        </button>
                        <button class="menu-btn secondary" id="settingsBtn">
                            ‚öôÔ∏è –û —Å–∏—Å—Ç–µ–º–µ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
    <div id="characterScreen" class="screen">
        <div class="character-container">
            <div class="character-header">
                <h1 class="character-title">üë§ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h1>
                <button class="back-btn" id="backToMenuBtn">‚Üê –ù–∞–∑–∞–¥</button>
            </div>
            
            <div class="character-content">
                <!-- –í–∫–ª–∞–¥–∫–∏ -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="stats">üìä –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</button>
                    <button class="tab-btn" data-tab="equipment">üéí –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞</button>
                </div>
                
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
                <div class="tab-content">
                    <!-- –í–∫–ª–∞–¥–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ -->
                    <div id="stats-tab" class="tab-pane active">
                        <div class="stats-container">
                            <div class="points-info">
                                <div class="available-points">
                                    –î–æ—Å—Ç—É–ø–Ω–æ –æ—á–∫–æ–≤: <span id="availablePoints">60</span>
                                </div>
                                <div style="font-size: 0.9em; opacity: 0.8; margin-top: 5px;">
                                    –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ—á–∫–∏ –º–µ–∂–¥—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
                                </div>
                            </div>
                            
                            <div class="stats-grid">
                                <!-- –°–∫–æ—Ä–æ—Å—Ç—å –±–µ–≥–∞ -->
                                <div class="stat-card">
                                    <div class="stat-header">
                                        <div class="stat-icon">üèÉ</div>
                                        <div class="stat-info">
                                            <h3>–°–∫–æ—Ä–æ—Å—Ç—å –±–µ–≥–∞</h3>
                                            <p>–í–ª–∏—è–µ—Ç –Ω–∞ –±–∞–∑–æ–≤—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –≥–æ–Ω–∫–µ (16-28 –∫–º/—á)</p>
                                        </div>
                                    </div>
                                    <div class="stat-controls">
                                        <button class="stat-btn minus" data-stat="runningSpeed">-</button>
                                        <div class="stat-value" id="runningSpeedValue">0/60</div>
                                        <button class="stat-btn plus" data-stat="runningSpeed">+</button>
                                    </div>
                                </div>
                                
                                <!-- –ú–µ—Ç–∫–æ—Å—Ç—å -->
                                <div class="stat-card">
                                    <div class="stat-header">
                                        <div class="stat-icon">üéØ</div>
                                        <div class="stat-info">
                                            <h3>–ú–µ—Ç–∫–æ—Å—Ç—å</h3>
                                            <p>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –º–∏—à–µ–Ω—å (50-95%)</p>
                                        </div>
                                    </div>
                                    <div class="stat-controls">
                                        <button class="stat-btn minus" data-stat="accuracy">-</button>
                                        <div class="stat-value" id="accuracyValue">0/60</div>
                                        <button class="stat-btn plus" data-stat="accuracy">+</button>
                                    </div>
                                </div>
                                
                                <!-- –°–∫–æ—Ä–æ—Å—Ç—å —Å—Ç—Ä–µ–ª—å–±—ã -->
                                <div class="stat-card">
                                    <div class="stat-header">
                                        <div class="stat-icon">‚ö°</div>
                                        <div class="stat-info">
                                            <h3>–°–∫–æ—Ä–æ—Å—Ç—å —Å—Ç—Ä–µ–ª—å–±—ã</h3>
                                            <p>–í—Ä–µ–º—è –º–µ–∂–¥—É –≤—ã—Å—Ç—Ä–µ–ª–∞–º–∏ (6-3 —Å–µ–∫—É–Ω–¥—ã)</p>
                                        </div>
                                    </div>
                                    <div class="stat-controls">
                                        <button class="stat-btn minus" data-stat="shootingSpeed">-</button>
                                        <div class="stat-value" id="shootingSpeedValue">0/60</div>
                                        <button class="stat-btn plus" data-stat="shootingSpeed">+</button>
                                    </div>
                                </div>
                                
                                <!-- –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å -->
                                <div class="stat-card">
                                    <div class="stat-header">
                                        <div class="stat-icon">üí™</div>
                                        <div class="stat-info">
                                            <h3>–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å</h3>
                                            <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∑–∞–ø–∞—Å —Å–∏–ª (60-150 –µ–¥–∏–Ω–∏—Ü)</p>
                                        </div>
                                    </div>
                                    <div class="stat-controls">
                                        <button class="stat-btn minus" data-stat="stamina">-</button>
                                        <div class="stat-value" id="staminaValue">0/60</div>
                                        <button class="stat-btn plus" data-stat="stamina">+</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- –ë–ª–æ–∫ —Å —Ä–∞—Å—á–µ—Ç–Ω—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
                            <div id="progressInfoContainer"></div>
                            
                            <div class="stats-actions">
                                <button class="reset-btn" id="resetStatsBtn">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
                                <button class="save-btn" id="saveStatsBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –í–∫–ª–∞–¥–∫–∞ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ -->
                    <div id="equipment-tab" class="tab-pane">
                        <div class="equipment-container">
                            <div class="equipment-placeholder">
                                <div class="placeholder-icon">üéí</div>
                                <h3>–°–∏—Å—Ç–µ–º–∞ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏</h3>
                                <p>–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</p>
                                <p>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É–ª—É—á—à–∞—Ç—å –ª—ã–∂–∏, –≤–∏–Ω—Ç–æ–≤–∫—É –∏ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</p>
                                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                                    <h4 style="color: #4FC3F7; margin-bottom: 10px;">–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:</h4>
                                    <ul style="text-align: left; opacity: 0.8;">
                                        <li>üèÇ –õ—ã–∂–∏ - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏</li>
                                        <li>üî´ –í–∏–Ω—Ç–æ–≤–∫–∞ - —É–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å—Ç—Ä–µ–ª—å–±—ã</li>
                                        <li>üëï –ö–æ—Å—Ç—é–º - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏</li>
                                        <li>üéØ –ü—Ä–∏—Ü–µ–ª - –±–æ–Ω—É—Å –∫ –º–µ—Ç–∫–æ—Å—Ç–∏</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≥–æ–Ω–∫–∏ -->
    <div id="gameScreen" class="screen">
        <div class="app-container">
            <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
            <header class="race-header">
                <div class="race-info">
                    <div class="laps-info">
                        <div class="lap-display">
                            <span class="lap-label">–ö–†–£–ì</span>
                            <span class="current-lap" id="currentLap">1</span>
                            <span class="lap-divider">/</span>
                            <span class="total-laps" id="totalLaps">3</span>
                        </div>
                        
                        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫—Ä—É–≥–∞ -->
                        <div id="lapProgressContainer" style="flex: 1; max-width: 200px; margin: 0 15px;">
                            <div style="font-size: 11px; color: #4FC3F7; margin-bottom: 4px; text-align: center;">
                                –ü–†–û–ì–†–ï–°–° –ö–†–£–ì–ê
                            </div>
                            <div class="progress-bar" style="background: rgba(255,255,255,0.1); border-radius: 10px; height: 6px; overflow: hidden;">
                                <div class="progress-fill" id="lapProgressFill" style="background: linear-gradient(135deg, #4CAF50, #2E7D32); height: 100%; border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
                            </div>
                            <div style="font-size: 10px; color: rgba(255,255,255,0.7); text-align: center; margin-top: 2px;">
                                <span id="lapProgressText">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="player-stats">
                        <!-- –£—Ä–æ–≤–µ–Ω—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ -->
                        <div class="stat-item">
                            <span class="stat-label">‚ö°</span>
                            <span class="stat-value" id="intensityValue">4</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">‚ù§Ô∏è</span>
                            <span class="stat-value" id="pulseValue">80</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">üí™</span>
                            <span class="stat-value" id="staminaValue">100%</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- –ë–ª–æ–∫ —Å—Ç—Ä–µ–ª—å–±—ã -->
            <div id="shootingScreen" class="shooting-screen" style="display: none;">
                <div class="shooting-container">
                    <div class="shooting-header">
                        <h2 id="shootingRoundName">–°—Ç—Ä–µ–ª—å–±–∞ –ª—ë–∂–∞</h2>
                        <div class="shooting-timer" id="shootingTimer">
                            –û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç—Ä–µ–ª—å–±—ã...
                        </div>
                    </div>
                    
                    <div class="shooting-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="shootingProgress" style="width: 0%;"></div>
                        </div>
                        <div class="progress-text" id="shootingProgressText">0/5 –≤—ã—Å—Ç—Ä–µ–ª–æ–≤</div>
                    </div>
                    
                    <div class="targets-display" id="targetsContainer">
                        <!-- –ú–∏—à–µ–Ω–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>

                    <div style="text-align: center; margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                        üí° –°—Ç—Ä–µ–ª—å–±–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ -->
            <div class="distance-progress" style="margin: 10px 15px;">
                <div class="progress-bar" style="background: rgba(255,255,255,0.1); border-radius: 10px; height: 8px;">
                    <div class="progress-fill" id="distanceProgress" style="background: linear-gradient(135deg, #4CAF50, #2E7D32); height: 100%; border-radius: 10px; width: 0%; transition: width 0.3s ease;"></div>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-top: 5px; color: rgba(255,255,255,0.7);">
                    <span id="currentDistance">0–º</span>
                    <span id="totalDistance">9900–º</span>
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ -->
            <main class="race-main">
                <div class="leaderboard-wrapper">
                    <div class="leaderboard-container">
                        <div class="leaderboard-header">
                            <span class="header-pos">–ü–û–ó</span>
                            <span class="header-flag">–°–¢–†–ê–ù–ê</span>
                            <span class="header-name">–ë–ò–ê–¢–õ–û–ù–ò–°–¢</span>
                            <span class="header-gap">–û–¢–°–¢–ê–í–ê–ù–ò–ï</span>
                            <span class="header-penalty">–®–¢–†–ê–§</span>
                        </div>
                        <div class="leaderboard-content" id="competitorsList">
                            <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                </div>
            </main>

            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <footer class="control-panel">
                <button class="control-btn slow-btn" id="slowBtn">
                    <div class="btn-icon">üê¢</div>
                    <div class="btn-label">–°–Ω–∏–∑–∏—Ç—å —Ç–µ–º–ø</div>
                </button>
                
                <button class="control-btn menu-btn" id="menuBtn">
                    <div class="btn-icon">‚öôÔ∏è</div>
                    <div class="btn-label">–ú–µ–Ω—é</div>
                </button>
                
                <button class="control-btn sprint-btn" id="sprintBtn">
                    <div class="btn-icon">üí®</div>
                    <div class="btn-label">–°–ø—Ä–∏–Ω—Ç!</div>
                </button>
            </footer>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ä—Ç–∞ –≥–æ–Ω–∫–∏ -->
    <div id="startStageScreen" class="stage-screen">
        <div class="stage-container">
            <div class="stage-header">
                <h2 class="stage-title">üèÅ –°—Ç–∞—Ä—Ç –≥–æ–Ω–∫–∏</h2>
                <div class="stage-subtitle" id="startRaceName">–°–ø—Ä–∏–Ω—Ç - 9.9 –∫–º</div>
            </div>
            
            <div class="stage-stats">
                <div class="stat-row">
                    <span class="stat-label">–î–∏—Å—Ç–∞–Ω—Ü–∏—è:</span>
                    <span class="stat-value" id="startDistance">9.9 –∫–º</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–°—Ç—Ä–µ–ª—å–±—ã:</span>
                    <span class="stat-value" id="startShootings">2</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–ö—Ä—É–≥–∏:</span>
                    <span class="stat-value" id="startLaps">3</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–î–ª–∏–Ω–∞ –∫—Ä—É–≥–∞:</span>
                    <span class="stat-value" id="startLapDistance">3.3 –∫–º</span>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–æ–∫–∞—Ü–∏–∏ -->
                <div class="location-info" style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                    <div style="text-align: center; color: #4FC3F7; font-weight: bold; margin-bottom: 5px;">
                        üìç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–æ–∫–∞—Ü–∏–∏
                    </div>
                    <div style="font-size: 0.9em;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>–õ–æ–∫–∞—Ü–∏—è:</span>
                            <span id="startLocationName">–ù–æ–≤–∏—á–∫–æ–≤—ã–π —Å—Ç–∞–¥–∏–æ–Ω</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>–£—Ä–æ–≤–Ω–∏ –±–æ—Ç–æ–≤:</span>
                            <span id="startBotLevels">0-5</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>–°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
                            <span id="startDifficulty">‚≠ê</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="stage-start-btn" id="startRaceStageBtn">
                üéÆ –ù–∞—á–∞—Ç—å –≥–æ–Ω–∫—É
            </button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–µ—Ä–µ–¥ —Å—Ç—Ä–µ–ª—å–±–æ–π -->
    <div id="preShootingScreen" class="stage-screen">
        <div class="stage-container">
            <div class="stage-header">
                <h2 class="stage-title" id="preShootingTitle">üéØ –°—Ç—Ä–µ–ª—å–±–∞ –ª—ë–∂–∞</h2>
                <div class="stage-subtitle">–≠—Ç–∞–ø —Å—Ç—Ä–µ–ª—å–±—ã</div>
            </div>
            
            <div class="stage-stats">
                <div class="stat-row">
                    <span class="stat-label">–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è:</span>
                    <span class="stat-value" id="preShootingPosition">4</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–û—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ:</span>
                    <span class="stat-value" id="preShootingGap">+15.3</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å –ª—ë–∂–∞:</span>
                    <span class="stat-value" id="preShootingAccuracy">80%</span>
                </div>
                <div class="wind-indicator">
                    <span class="wind-icon">üí®</span>
                    <span class="wind-value" id="preShootingWind">–£–º–µ—Ä–µ–Ω–Ω—ã–π –≤–µ—Ç–µ—Ä</span>
                </div>
            </div>
            
            <button class="stage-start-btn" id="startShootingBtn">
                üéØ –ù–∞—á–∞—Ç—å —Å—Ç—Ä–µ–ª—å–±—É
            </button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–æ—Å–ª–µ —Å—Ç—Ä–µ–ª—å–±—ã -->
    <div id="postShootingScreen" class="stage-screen">
        <div class="stage-container">
            <div class="stage-header">
                <h2 class="stage-title">üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç—Ä–µ–ª—å–±—ã</h2>
                <div class="stage-subtitle" id="postShootingSubtitle">–°—Ç—Ä–µ–ª—å–±–∞ –ª—ë–∂–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</div>
            </div>
            
            <div class="shooting-results">
                <div class="stat-row">
                    <span class="stat-label">–ü–æ–ø–∞–¥–∞–Ω–∏—è:</span>
                    <span class="stat-value" id="postShootingHits">4/5</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–ü—Ä–æ–º–∞—Ö–∏:</span>
                    <span class="stat-value" id="postShootingMisses">1</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–®—Ç—Ä–∞—Ñ:</span>
                    <span class="stat-value" id="postShootingPenalty">+150–º –∫—Ä—É–≥</span>
                </div>
                
                <div class="targets-preview" id="postShootingTargets">
                    <!-- –ú–∏—à–µ–Ω–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
            
            <button class="stage-start-btn" id="continueAfterShootingBtn">
                ‚õ∑Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≥–æ–Ω–∫—É
            </button>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript —Ñ–∞–π–ª–æ–≤ -->
    <script src="js/utils/constants.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="js/components/race-manager.js"></script>
    <script src="js/core/player.js"></script>
    <script src="js/core/game.js"></script>
    <script src="js/components/shooting-engine.js"></script>
    <script src="js/screens/main-menu.js"></script>
    <script src="js/screens/game-screen.js"></script>
    <script src="js/screens/character-screen.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üèÅ –ó–∞–≥—Ä—É–∑–∫–∞ –ë–∏–∞—Ç–ª–æ–Ω –ú–µ–Ω–µ–¥–∂–µ—Ä–∞ - –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ v3.0...');
            
            try {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
                window.raceManager = new RaceManager();
                window.raceManager.loadHistoryFromStorage();
                
                window.playerProfile = new PlayerProfile();
                window.biathlonGame = new BiathlonGame();
                window.shootingEngine = new ShootingEngine();
                
                // –ü–µ—Ä–µ–¥–∞—á–∞ raceTypes –≤ RaceManager
                window.raceManager.initializeRaces(GameConstants.RACE_TYPES);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–æ–≤
                window.mainMenu = new MainMenu();
                window.gameScreen = new GameScreen();
                window.characterScreen = new CharacterScreen();
                
                console.log('‚úÖ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
                console.log('üìä –í–µ—Ä—Å–∏—è –∏–≥—Ä—ã:', GameConstants.VERSION);
                console.log('üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ –≥–æ–Ω–∫–∏:', Object.keys(GameConstants.RACE_TYPES));
                console.log('üë§ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–∞:', window.playerProfile.getAllStats());
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ
                setTimeout(() => {
                    if (window.mainMenu) {
                        window.mainMenu.showMessage(
                            '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ë–∏–∞—Ç–ª–æ–Ω –ú–µ–Ω–µ–¥–∂–µ—Ä v3.0!\n\n' +
                            'üéØ –ù–æ–≤–∞—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ–Ω–æ–∫\n' +
                            'üèÉ –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∏ —Ñ–∏–∑–∏–∫–∞\n' +
                            '‚ö° 7 —É—Ä–æ–≤–Ω–µ–π –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏\n' +
                            'üí™ –°–∏—Å—Ç–µ–º–∞ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏ –∏ –ø—É–ª—å—Å–∞',
                            'info'
                        );
                    }
                }, 1000);
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                const errorMessage = `
                    –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã: ${error.message}
                    
                    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
                    ‚Ä¢ –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã JavaScript
                    ‚Ä¢ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä–∞
                    ‚Ä¢ –ö–æ–Ω—Å–æ–ª—å –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                    
                    –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
                    1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    2. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
                    3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
                `;
                
                alert(errorMessage);
            }
        });

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        window.debugGame = {
            showPlayerStats: function() {
                if (window.playerProfile) {
                    const stats = window.playerProfile.getAllStats();
                    const progress = window.playerProfile.getProgressInfo();
                    console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞:', stats);
                    console.log('üéØ –†–∞—Å—á–µ—Ç–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:', progress);
                }
            },
            
            showRaceInfo: function() {
                if (window.biathlonGame && window.biathlonGame.race) {
                    console.log('üèÅ –¢–µ–∫—É—â–∞—è –≥–æ–Ω–∫–∞:', window.biathlonGame.race);
                    console.log('üìç –õ–æ–∫–∞—Ü–∏—è:', window.biathlonGame.location);
                }
            },
            
            resetGame: function() {
                if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é –∏–≥—Ä—É? –≠—Ç–æ –æ—á–∏—Å—Ç–∏—Ç –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.')) {
                    localStorage.clear();
                    location.reload();
                }
            },
            
            testShooting: function() {
                if (window.shootingEngine && window.biathlonGame && window.biathlonGame.player) {
                    const player = window.biathlonGame.player;
                    const testRound = {
                        name: "–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–µ–ª—å–±–∞",
                        position: "prone",
                        afterLap: 1
                    };
                    window.shootingEngine.startShooting(player, testRound);
                }
            }
        };

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
        window.addEventListener('error', function(e) {
            console.error('üö® –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞:', e.error);
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', function(e) {
            if (window.biathlonGame && window.biathlonGame.isRacing && !window.biathlonGame.isPaused) {
                e.preventDefault();
                e.returnValue = '–ò–¥–µ—Ç –≥–æ–Ω–∫–∞! –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É?';
                return '–ò–¥–µ—Ç –≥–æ–Ω–∫–∞! –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É?';
            }
        });
    </script>
</body>
</html>
